(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{2368:(e,t,s)=>{"use strict";s.d(t,{_:()=>n,e:()=>i});var a=s(5155),r=s(2115);let l=(0,r.createContext)(),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)([]),[n,o]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem("cart");e&&i(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(s)),o(s.reduce((e,t)=>e+t.quantity,0))},[s]);let d=e=>{i(t=>t.filter(t=>t.id!==e))},c=()=>{i([])},x=()=>s.reduce((e,t)=>e+t.price*t.quantity,0),m=async e=>{try{let t={items:s,total:x(),...e,orderDate:new Date().toISOString()},a=Math.random().toString(36).substr(2,9).toUpperCase();if(localStorage.setItem("lastOrder",JSON.stringify({orderId:a,items:s,total:x(),shipping:e.shipping,paymentMethod:e.paymentMethod})),"ONLINE"===e.paymentMethod&&!(await fetch("/api/process-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:x(),paymentDetails:e.paymentDetails})})).ok)throw Error("Payment processing failed");if(!(await fetch("".concat("http://localhost:1337","/api/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})})).ok)throw Error("Failed to process order");return c(),{success:!0,orderId:a}}catch(e){return console.error("Error processing order:",e),{success:!1,error:e.message}}};return(0,a.jsx)(l.Provider,{value:{cart:s,cartCount:n,addToCart:e=>{i(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:d,updateQuantity:(e,t)=>{if(t<1)return void d(e);i(s=>s.map(s=>s.id===e?{...s,quantity:t}:s))},clearCart:c,getCartTotal:x,processOrder:m},children:t})},n=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useCart must be used within a CartProvider");return e}},5433:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2368),l=s(5695),i=s(6766),n=s(6874),o=s.n(n);let d=()=>{let e=(0,l.useRouter)(),{cart:t,removeFromCart:s,updateQuantity:n,getCartTotal:d,clearCart:c}=(0,r._)();return 0===t.length?(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-teal-800 mb-4",children:"Your Cart is Empty"}),(0,a.jsx)("p",{className:"text-teal-600 mb-8",children:"Start shopping to add items to your cart."}),(0,a.jsx)(o(),{href:"/products",className:"inline-block bg-orange-400 text-teal-900 px-8 py-3 rounded-lg font-semibold hover:bg-orange-500 transition duration-300",children:"Browse Products"})]})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-teal-800 mb-8",children:"Shopping Cart"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[t.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 bg-white p-4 rounded-lg shadow-sm border border-teal-100",children:[(0,a.jsx)("div",{className:"relative w-24 h-24 flex-shrink-0",children:(0,a.jsx)(i.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover rounded-md"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-teal-800",children:e.name}),(0,a.jsx)("p",{className:"text-teal-600 text-sm",children:e.category}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center border border-teal-200 rounded-md",children:[(0,a.jsx)("button",{onClick:()=>n(e.id,e.quantity-1),className:"px-3 py-1 text-teal-600 hover:text-teal-800 transition-colors",children:"-"}),(0,a.jsx)("span",{className:"px-3 py-1 text-teal-800 border-x border-teal-200",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>n(e.id,e.quantity+1),className:"px-3 py-1 text-teal-600 hover:text-teal-800 transition-colors",children:"+"})]}),(0,a.jsx)("button",{onClick:()=>s(e.id),className:"text-orange-500 hover:text-orange-600 transition-colors",children:"Remove"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-teal-800 font-semibold",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-teal-600",children:["$",e.price.toFixed(2)," each"]})]})]},e.id)),(0,a.jsx)("button",{onClick:c,className:"text-orange-500 hover:text-orange-600 transition-colors mt-4",children:"Clear Cart"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-teal-100 h-fit",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-teal-800 mb-4",children:"Order Summary"}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-teal-600",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["$",d().toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-teal-600",children:[(0,a.jsx)("span",{children:"Shipping"}),(0,a.jsx)("span",{children:"Free"})]}),(0,a.jsx)("div",{className:"border-t border-teal-100 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-teal-800",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["$",d().toFixed(2)]})]})})]}),(0,a.jsx)("button",{onClick:()=>e.push("/checkout"),className:"w-full bg-orange-400 text-teal-900 py-3 rounded-lg font-semibold hover:bg-orange-500 transition duration-300",children:"Proceed to Checkout"})]})]})]})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9304:(e,t,s)=>{Promise.resolve().then(s.bind(s,5433))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,766,441,684,358],()=>t(9304)),_N_E=e.O()}]);
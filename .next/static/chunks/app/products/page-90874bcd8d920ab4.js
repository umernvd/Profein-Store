(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{1607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(5155),l=r(6766),s=r(2368),o=r(2115);function n(){let{addToCart:e}=(0,s._)(),[t,r]=(0,o.useState)([]),[n,i]=(0,o.useState)(!0),[c,d]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{try{i(!0);let e=await fetch("".concat("http://localhost:1337","/api/products?populate=*"));if(!e.ok)throw Error("Failed to fetch products");let{data:t}=await e.json(),a=t.map(e=>{var t,r,a,l,s,o;return{id:e.id,name:e.name,price:e.price,description:e.description,image:(null==(a=e.image)||null==(r=a.formats)||null==(t=r.thumbnail)?void 0:t.url)?"".concat("http://localhost:1337").concat(e.image.formats.thumbnail.url):"".concat("http://localhost:1337").concat(null==(l=e.image)?void 0:l.url)||0,category:(null==(o=e.products)||null==(s=o[0])?void 0:s.name)||"Uncategorized"}});r(a)}catch(e){console.error("Error fetching products:",e),d("Failed to load products. Please try again later.")}finally{i(!1)}})()},[]),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-teal-800 mb-8",children:"Products"}),n&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-teal-600",children:"Loading products..."})}),c&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:c}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:t.map(t=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 border border-teal-100",children:[(0,a.jsx)("div",{className:"relative h-48",children:(0,a.jsx)(l.default,{src:t.image,alt:t.name,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",unoptimized:!0})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("span",{className:"text-sm text-orange-500 font-medium",children:t.category}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-teal-800 mt-1",children:t.name}),(0,a.jsx)("p",{className:"text-teal-600 mt-2 text-sm line-clamp-2",children:t.description}),(0,a.jsxs)("p",{className:"text-teal-900 font-semibold mt-2",children:["$",t.price.toFixed(2)]}),(0,a.jsxs)("button",{onClick:()=>e(t),className:"w-full mt-4 bg-orange-400 text-teal-900 py-2 rounded-md hover:bg-orange-500 transition-colors duration-300 flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to Cart"]})]})]},t.id))})]})}},2368:(e,t,r)=>{"use strict";r.d(t,{_:()=>n,e:()=>o});var a=r(5155),l=r(2115);let s=(0,l.createContext)(),o=e=>{let{children:t}=e,[r,o]=(0,l.useState)([]),[n,i]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e=localStorage.getItem("cart");e&&o(JSON.parse(e))},[]),(0,l.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r)),i(r.reduce((e,t)=>e+t.quantity,0))},[r]);let c=e=>{o(t=>t.filter(t=>t.id!==e))},d=()=>{o([])},u=()=>r.reduce((e,t)=>e+t.price*t.quantity,0),p=async e=>{try{let t={items:r,total:u(),...e,orderDate:new Date().toISOString()},a=Math.random().toString(36).substr(2,9).toUpperCase();if(localStorage.setItem("lastOrder",JSON.stringify({orderId:a,items:r,total:u(),shipping:e.shipping,paymentMethod:e.paymentMethod})),"ONLINE"===e.paymentMethod&&!(await fetch("/api/process-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:u(),paymentDetails:e.paymentDetails})})).ok)throw Error("Payment processing failed");if(!(await fetch("".concat("http://localhost:1337","/api/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})})).ok)throw Error("Failed to process order");return d(),{success:!0,orderId:a}}catch(e){return console.error("Error processing order:",e),{success:!1,error:e.message}}};return(0,a.jsx)(s.Provider,{value:{cart:r,cartCount:n,addToCart:e=>{o(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:c,updateQuantity:(e,t)=>{if(t<1)return void c(e);o(r=>r.map(r=>r.id===e?{...r,quantity:t}:r))},clearCart:d,getCartTotal:u,processOrder:p},children:t})},n=()=>{let e=(0,l.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let a=r(2115);function l(e,t){let r=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=s(e,a)),t&&(l.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7918:(e,t,r)=>{Promise.resolve().then(r.bind(r,1607))}},e=>{var t=t=>e(e.s=t);e.O(0,[766,441,684,358],()=>t(7918)),_N_E=e.O()}]);